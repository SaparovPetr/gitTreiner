# Currient version:

[gitTreiner](https://saparovpetr.github.io/gitTreiner/)

## БАГИ ПРИ РАБОТЕ ПРИЛОЖЕНИЯ:

- Консоль выдает ошибку NotAllowedError: `play() failed because the user didn't interact with the document first`., поскольку код содержит автовоспроизведение аудио-файла без спроса пользователя,
- В режиме разработки аудио воспроизводится дважды из-за строго режима.

## TODO:

- personalise app (connect app with user's repositories)

## КАК РАБОТАЕТ ПРИЛОЖЕНИЕ:

### Понятия:

> **База** (тип TOneWord[]) - конкретный массив объектов типа TOneWord. Их два - firstWordBase и secondWordBase.

> **Колллекция**- короткий массив, полученный из Базы (сформирован из рандомно отобранных элементов Базы),

> **Рабочий элемент** - первый элемент Коллекции.

### Логика:

- При инициализации приложения, устанавливается режим по-умолчанию `AppMode.Large`,
- Следом выбирается База (режиму `AppMode.Large` соответствует База `firstWordBase`),
- функцией `fetchCollection` из выбранной Базы формируется Коллекция,
- Коллекция записывается в стор, а каждый ее объект дополняется ключом ID с уникальной значением,
- Компонент `WordItem` рендерит даннные Рабочего элемента Коллекции, а также прокидывает их в компонент `OptionList`,
- компонент `OptionList` получает данные из Рабочего элемента Коллекции (т.е. верный вариант перевода), а также из текущей Базы (три рандомных неверных варианта перевода),
- следом компонент `OptionList` создает из полученных данных (четырех вариантов перевода) новый массив `shuffledArrey` и перемешивает их индексы в массиве утилитой `shuffle`,
- пользователь выбирает ответ, если он невыерный, компонет ответа меняет цвет, а если верный, то первый элемент Колекции удаляется из нее, компонент WordItem ререндерится,
- так происходит пока не кончится Коллекция,
- если Коллекция пустеет, `FunctionalComponent` отрисовывает "поздравление" и кнопку с колбеком для перезапуска приложения.

### Паралельная логика:

- рендеринг компонентов `WordItem` и `Modal` сопровождается выполнением хука `useEffect`, воспроизводящего аудио по ссылке публичного api онлайн-школы SkyEng,
- Открытием модального окна сопровождается копированием словосочетания в буфер обмена операционки утилитой `copyTextToClipboard`,
- некоторые записи данных в стор (данные о выбранном режиме, данные о прогрессе) сопровождаются записью в `LocalStorage` браузера, чтобы эти данные не проподали при неактивности приложения.
